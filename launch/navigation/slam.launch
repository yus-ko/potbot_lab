<launch>
  <arg name="use_rviz"                    default="true"/>
  <arg name="publish_robot_description"   default="true"/>
  <arg name="multi_robot"                 default="robot_0"/>
  <arg name="set_base_frame"              default="$(arg multi_robot)/base_footprint"/>
  <arg name="set_odom_frame"              default="$(arg multi_robot)/odom"/>
  <arg name="set_map_frame"               default="map"/>
  <arg name="file_urdf"                   default="$(find turtlebot3_description)/urdf/turtlebot3_waffle_pi.urdf.xacro"/>
  <arg name="file_rviz"                   default="$(find potbot_example)/rviz/navigation.rviz"/>

  <group ns="$(arg multi_robot)">

    <group if="$(arg publish_robot_description)">
      <include file="$(find potbot)/launch/env/remote.launch">
        <arg name="urdf_file"               default="$(find xacro)/xacro --inorder '$(arg file_urdf)'"/>
        <arg name="multi_robot_name"        value="$(arg multi_robot)"/>
      </include>
    </group>

    <!-- Gmapping -->
    <node pkg="gmapping" type="slam_gmapping" name="slam_gmapping">
      <rosparam command="load" file="$(find potbot_example)/config/navigation/gmapping.yaml" />
      <param name="base_frame" value="$(arg set_base_frame)"/>
      <param name="odom_frame" value="$(arg set_odom_frame)"/>
      <param name="map_frame"  value="$(arg set_map_frame)"/>
    </node>

    <group if="$(arg use_rviz)">
      <node pkg="rviz" type="rviz" name="rviz_gmapping" required="true" args="-d $(arg file_rviz)"/>
    </group>
    
  </group>

</launch>